# Resume-Robot 前端重构计划

## 一、重构目标

将现有混合前端拆分为两个独立的前端应用：
1. **用户侧前端（HR工作台）**：面向企业内部HR使用
2. **管理后台前端**：面向平台管理员使用

## 二、目录结构

```
frontend/
├── app/                    # 用户侧前端（HR工作台）
│   ├── src/
│   │   ├── pages/
│   │   │   ├── Dashboard.tsx           # 控制台
│   │   │   ├── ResumeManagement/      # 简历管理
│   │   │   │   ├── TalentPool.tsx     # 简历总库
│   │   │   │   ├── JobResumePool.tsx  # 岗位简历库
│   │   │   │   └── FilterBox.tsx      # 过滤箱
│   │   │   ├── JobManagement/         # 岗位管理
│   │   │   │   ├── JobList.tsx        # 岗位列表
│   │   │   │   ├── JobDetail.tsx      # 岗位详情
│   │   │   │   └── JobCreate.tsx      # 创建岗位
│   │   │   ├── Matching/              # 匹配结果
│   │   │   │   ├── MatchList.tsx      # 匹配列表
│   │   │   │   └── MatchDetail.tsx    # 匹配详情
│   │   │   ├── Reports/               # 推荐报告
│   │   │   │   ├── ReportList.tsx     # 报告列表
│   │   │   │   └── ReportGenerate.tsx # 生成报告
│   │   │   └── Settings/              # 系统设置（租户管理员）
│   │   │       ├── CompanyInfo.tsx    # 公司信息
│   │   │       ├── FilterRules.tsx     # 筛选规则
│   │   │       ├── UserManagement.tsx  # 用户管理
│   │   │       └── Subscription.tsx    # 订阅管理
│   │   ├── components/
│   │   │   ├── common/
│   │   │   │   ├── Layout.tsx          # HR工作台布局
│   │   │   │   └── Header.tsx
│   │   │   ├── resume/
│   │   │   └── job/
│   │   ├── stores/
│   │   │   └── authStore.ts           # 认证store（包含tenant_id）
│   │   └── App.tsx                    # 用户侧App入口
│   ├── package.json
│   └── vite.config.ts
│
├── admin/                   # 管理后台前端
│   ├── src/
│   │   ├── pages/
│   │   │   ├── Dashboard.tsx           # 平台仪表盘
│   │   │   ├── Tenants/                # 租户管理
│   │   │   │   ├── TenantList.tsx     # 租户列表
│   │   │   │   ├── TenantDetail.tsx   # 租户详情
│   │   │   │   └── TenantCreate.tsx    # 创建租户
│   │   │   ├── Subscriptions/          # 订阅管理
│   │   │   │   ├── PlanList.tsx       # 套餐列表
│   │   │   │   └── SubscriptionList.tsx # 订阅列表
│   │   │   ├── System/                 # 系统配置
│   │   │   │   ├── LLMConfig.tsx      # LLM服务配置
│   │   │   │   ├── SystemParams.tsx    # 系统参数
│   │   │   │   └── FeatureFlags.tsx    # 功能开关
│   │   │   └── Statistics/            # 数据统计
│   │   │       ├── Overview.tsx        # 平台概览
│   │   │       ├── TenantStats.tsx     # 租户统计
│   │   │       └── Revenue.tsx         # 收入统计
│   │   ├── components/
│   │   │   ├── common/
│   │   │   │   ├── Layout.tsx          # 管理后台布局
│   │   │   │   └── Header.tsx
│   │   ├── stores/
│   │   │   └── authStore.ts           # 平台管理员认证store
│   │   └── App.tsx                    # 管理后台App入口
│   ├── package.json
│   └── vite.config.ts
│
└── shared/                  # 共享代码（可选）
    ├── types/              # 共享类型定义
    ├── utils/              # 共享工具函数
    └── services/           # 共享API服务
```

## 三、用户侧前端路由设计

```
/                           # 重定向到 /dashboard
/login                      # 登录页
/register                   # 注册页（可选）
/dashboard                  # 控制台
/resumes                    # 简历管理
  /talent-pool             # 简历总库
  /job-pool/:jobId         # 岗位简历库
  /filter-box              # 过滤箱
/jobs                       # 岗位管理
  /list                    # 岗位列表
  /:id                     # 岗位详情
  /create                  # 创建岗位
/matching                   # 匹配结果
  /list                    # 匹配列表
  /:id                     # 匹配详情
/reports                    # 推荐报告
  /list                    # 报告列表
  /generate                # 生成报告
/settings                   # 系统设置（租户管理员）
  /company-info            # 公司信息
  /filter-rules            # 筛选规则
  /users                   # 用户管理
  /subscription            # 订阅管理
```

## 四、管理后台路由设计

```
/admin                      # 重定向到 /admin/dashboard
/admin/login                # 平台管理员登录
/admin/dashboard            # 平台仪表盘
/admin/tenants              # 租户管理
  /list                     # 租户列表
  /:id                      # 租户详情
  /create                   # 创建租户
/admin/subscriptions        # 订阅管理
  /plans                    # 套餐配置
  /list                     # 订阅列表
/admin/system               # 系统配置
  /llm                      # LLM服务配置
  /params                   # 系统参数
  /features                 # 功能开关
/admin/statistics           # 数据统计
  /overview                 # 平台概览
  /tenants                  # 租户统计
  /revenue                  # 收入统计
```

## 五、用户角色和权限

### 用户侧前端
- **HR用户**：可以访问所有业务功能（简历、岗位、匹配、报告）
- **租户管理员**：额外可以访问系统设置（公司信息、筛选规则、用户管理、订阅管理）

### 管理后台
- **平台管理员**：可以访问所有管理后台功能

## 六、API设计

### 用户侧API（自动注入tenant_id）
```
/api/v1/auth/login              # 用户登录（返回tenant_id）
/api/v1/resumes/*               # 简历相关API
/api/v1/jobs/*                  # 岗位相关API
/api/v1/matching/*              # 匹配相关API
/api/v1/reports/*               # 报告相关API
/api/v1/settings/*              # 设置相关API（租户管理员）
```

### 管理后台API（需要平台管理员权限）
```
/api/v1/admin/auth/login        # 平台管理员登录
/api/v1/admin/tenants/*         # 租户管理API
/api/v1/admin/subscriptions/*   # 订阅管理API
/api/v1/admin/system/*          # 系统配置API
/api/v1/admin/statistics/*      # 数据统计API
```

## 七、实施步骤

1. ✅ 创建前端重构计划文档
2. ⏳ 创建用户侧前端目录结构（frontend/app/）
3. ⏳ 创建管理后台前端目录结构（frontend/admin/）
4. ⏳ 迁移现有页面到用户侧前端
5. ⏳ 创建管理后台页面
6. ⏳ 更新后端API：区分用户侧和管理后台
7. ⏳ 实现多租户中间件
8. ⏳ 更新数据模型：增加tenant_id
9. ⏳ 更新Docker配置：支持双前端部署

## 八、技术栈

- React 18 + TypeScript
- React Router v6
- Ant Design 5
- Zustand（状态管理）
- React Query（数据获取）
- Vite（构建工具）

## 九、部署架构

```
Nginx
├── app.resume-robot.com → frontend/app/dist（用户侧前端）
└── admin.resume-robot.com → frontend/admin/dist（管理后台）
```

