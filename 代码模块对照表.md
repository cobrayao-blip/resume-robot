# Resume-Robot 代码模块对照表（保留 / 迁移 / 候选删除）

> 说明：本表用于指导后续重构与删除工作，**先标记，再删除**。只有在确认不再被新架构使用时，才实际删除文件。

---

## 一、前端（旧目录：`frontend/src`）

### 1. 顶层入口与样式

| 文件 | 用途 | 归类 |
|------|------|------|
| `src/main.tsx` | 旧单体前端入口 | ✅ 暂时保留（用于现有运行），后续迁移到 `app/` 与 `admin/` 后删除 |
| `src/App.tsx` | 旧路由入口，混合 HR + 管理后台 | ⚠️ 迁移后删除（逻辑已在 `frontend/app` 和 `frontend/admin` 重新设计） |
| `src/index.css` | 旧全局样式 | ⚠️ 可参考样式，逐步迁到 `app/src/index.css` 与 `admin/src/index.css` 后删除 |
| `src/App.css` | 旧App样式 | ⚠️ 同上，迁移后删除 |
| `src/styles/professional-business.css` | UI 主题样式 | ✅ 可复用，后续按需引入到 `app`（HR 工作台） |

### 2. 认证与用户

| 文件 | 用途 | 归类 |
|------|------|------|
| `src/stores/authStore.ts` | 旧认证 store | ⚠️ 仅在旧前端使用，新架构在 `app` / `admin` 各自有 `authStore`，迁移完成后删除 |
| `src/components/auth/Login.tsx` | 旧登录页（混合路由跳转） | ⚠️ 已在 `app` / `admin` 新建登录页，之后替换掉旧入口后可删除 |
| `src/components/auth/Register.tsx` | 注册页 | ⚠️ 视 SaaS 策略（是否开放自助注册）决定保留或删除，暂列为候选删除 |
| `src/types/user.ts` | 用户类型定义 | ✅ 可参考迁移到 `app/src/types/user.ts` 与 `admin/src/types/user.ts`，迁移完成后删除旧文件 |

### 3. 简历 / 模板相关页面与组件

| 文件 | 用途 | 归类 |
|------|------|------|
| `src/pages/ResumeList.tsx` | 简历列表（旧逻辑） | ⚠️ 逻辑可部分复用到 `app/src/pages/ResumeManagement`，迁移完成后删除 |
| `src/pages/ParsedResumeList.tsx` | 解析简历列表 | ⚠️ 同上，作为新「简历总库 / 明细」的逻辑参考，迁移后删除 |
| `src/pages/ResumeGenerator.tsx` | 简历生成 | ⚠️ 如新产品不强调“为候选人生成简历”，可候选删除；如果保留，则迁移到新 HR 工作台下的拓展模块 |
| `src/pages/TemplateLibrary.tsx` | 模板库 | ⚠️ 与新“推荐报告”有一定关系，建议：只保留与报告模板直接相关的部分，其余候选删除 |
| `src/pages/TemplateDesign.tsx` | 模板设计器 | ⚠️ 复杂且与老产品强绑定，MVP 简历机器人不依赖，可暂时标记为候选删除 |
| `src/components/template/*` | 模板设计器相关组件 | ⚠️ 同上，如短期不做“在线简历模板设计”，整体候选删除（删除前再确认一次） |
| `src/components/resume/*` | 简历编辑/预览组件 | ⚠️ 如不再提供“为候选人编辑简历”的功能，可候选删除；否则迁移到 HR 侧的某个工具页 |

### 4. 新增 Resume-Robot 相关页面

| 文件 | 用途 | 归类 |
|------|------|------|
| `src/pages/JobManagement.tsx` | 岗位管理（旧实现） | ✅ 逻辑可迁移到 `app/src/pages/JobManagement`，迁移完成后删除旧文件 |
| `src/pages/ResumeMatching.tsx` | 简历匹配（旧实现） | ✅ 同上，迁移到 `app/src/pages/Matching` 作为逻辑参考，迁移后删除旧文件 |
| `src/pages/DataCenter.tsx` | 数据中心 | ⚠️ 如新设计不再保留“数据中心”模块，可候选删除；否则迁移为统计报表页 |

### 5. 管理后台相关页面

| 文件 | 用途 | 归类 |
|------|------|------|
| `src/pages/admin/AdminDashboard.tsx` | 旧管理后台仪表盘 | ⚠️ 功能将迁移到 `frontend/admin/src/pages/Dashboard.tsx`，迁移后删除 |
| `src/pages/admin/UserManagement.tsx` | 用户管理 | ⚠️ 与租户内用户管理重合，新结构中应放到 HR 侧设置页或平台侧，迁移完成后删除 |
| `src/pages/admin/RegistrationRequests.tsx` | 注册审核 | ⚠️ 如 SaaS 不采用“人工审核注册”，可删除 |
| `src/pages/admin/SystemSettings.tsx` | 系统配置 | ⚠️ 逻辑迁移到 `admin/src/pages/System/*` 后删除 |
| `src/pages/admin/TemplateManagement.tsx` | 模板管理 | ⚠️ 如不再提供对外模板业务，可删除；如要保留，迁移到 admin 或 app 下新路径 |

### 6. 服务与工具

| 文件 | 用途 | 归类 |
|------|------|------|
| `src/services/api.ts` | 旧 axios 封装 | ⚠️ 功能已在 `app` / `admin` 各自新建，迁移必要逻辑（错误处理）后删除 |
| `src/services/deepseek.ts` | DeepSeek 调用封装 | ✅ 如仍使用 DeepSeek，可迁移到后端或 `shared/services`；前端调用需极简 |
| `src/services/export.ts` | 导出服务 | ✅ 与报告导出相关，可迁移到 `app` 的 Report 模块，旧文件删除 |
| `src/services/jobApi.ts` | 岗位API调用 | ✅ 迁移适配到新 `app/src/services` 后删除 |
| `src/utils/*` | 模板/组件元数据、logger | ⚠️ 与模板系统强绑定的候选删除；logger 类工具可迁到 `shared/utils` |

---

## 二、前端（新目录：`frontend/app` 与 `frontend/admin`）

> 说明：新目录下的文件默认都是 **保留**，后续只会迭代优化，不会删除。

- `frontend/app`：用户侧 HR 工作台（简历、岗位、匹配、报告、设置）
- `frontend/admin`：平台管理后台（租户、订阅、系统配置、统计）

这些目录目前为**正在建设中的新前端**，不再分类为删除对象。

---

## 三、后端 models（`backend/app/models`）

| 文件 | 用途 | 归类 |
|------|------|------|
| `user.py` | 用户表（平台用户） | ✅ 保留，后续增加 `tenant_id` / 角色字段，支持 HR / 租户管理员 / 平台管理员 区分 |
| `resume.py` | 简历、解析结果、推荐报告模板等 | ✅ 保留，包含 `ResumeTemplate` 和 `TemplateVersion` 用于推荐报告模板管理 |
| `job.py` | 岗位、筛选规则、匹配记录、公司信息等 | ✅ 保留，是“岗位管理 + 匹配系统 + 公司信息”的核心 |
| `mongodb_models.py` | MongoDB 文档模型 | ✅ 保留，用于岗位画像、简历解析详情、匹配详情 |
| `system_settings.py` | 系统级配置 | ⚠️ 视管理后台设计决定：若用作平台全局配置，则保留；否则可整合到新的 admin 设置模型 |
| `user_llm_config.py` | 用户个人 LLM 配置 | ⚠️ 若 SaaS 阶段改为“租户级 / 平台级 LLM 配置”，则此表可简化或删除 |
| `registration_request.py` | 注册申请 | ⚠️ 如不再采用“注册审核”机制，可候选删除（连同相关接口） |

---

## 四、后端 API（`backend/app/api/v1/endpoints`）

| 文件 | 用途 | 归类 |
|------|------|------|
| `auth.py` | 登录、认证 | ✅ 保留，后续区分用户侧登录和平台管理员登录（可拆为 `/auth` 与 `/admin/auth`） |
| `users.py` | 用户资料、列表 | ✅ 保留，用户侧 `users/me` 等；平台管理员部分移动到 `admin` 命名空间 |
| `jobs.py` | 岗位管理 | ✅ 保留，是 Resume-Robot 核心之一 |
| `resumes.py` | 简历管理 | ✅ 保留（简历总库 / 岗位简历库的基础） |
| `parsed_resumes.py` | 解析结果API | ✅ 保留（视是否直接从Mongo读取，可简化） |
| `batch.py` | 批量上传/解析/匹配 | ✅ 保留，支持批量处理的关键 |
| `match_service` 相关（在 services 中） | 匹配逻辑 | ✅ 保留 |
| `export.py` | 导出（报告等） | ✅ 保留，与推荐报告导出直接相关 |
| `files.py` / `source_files.py` | 文件上传/存储 | ✅ 保留，用于简历文件管理 |
| `deepseek.py` | 调用 DeepSeek 的API封装 | ⚠️ 如前端不直连 LLM，可仅保留后端内部使用接口 |
| `templates.py` | 推荐报告模板API | ✅ **已恢复**：用于推荐报告模板管理，生成推荐报告Word文档的核心功能 |
| `admin.py` | 旧管理接口 | ⚠️ 待拆分为 `/api/v1/admin/*` 下的新接口，重构完成后删除旧的混合逻辑 |
| `monitoring.py` | 健康检查、监控 | ✅ 保留 |

---

## 五、后端 services（`backend/app/services`）

| 文件 | 用途 | 归类 |
|------|------|------|
| `resume_parser.py` | 简历解析（调用 pdfplumber/LLM） | ✅ 保留，简历机器人核心 |
| `filter_service.py` | 预筛选规则引擎 | ✅ 保留 |
| `match_service.py` | 简历-岗位匹配 | ✅ 保留 |
| `word_exporter.py` | Word 报告导出 | ✅ 保留，使用模板生成推荐报告Word文档 |
| `job_service.py` | 岗位业务逻辑 | ✅ 保留 |
| `batch_service.py` | 批量处理 | ✅ 保留 |
| `deepseek_service.py` / `llm_service.py` | LLM 调用封装 | ✅ 保留，按新 Prompt & 公司信息增强策略调整 |
| `config_service.py` / `usage_limit.py` 等 | 会员/用量限制逻辑 | ⚠️ 如 SaaS 第一阶段不做复杂额度控制，可暂时保留但不启用，后续决定是否删除或改造 |
| `conversation_service.py` / `content_optimizer.py` | 与“对话/优化内容”相关 | ⚠️ 若不在简历机器人 MVP 中使用，可候选删除 |

---

## 六、后端迁移与删除建议（高层级）

1. **必须保留并重点打磨的模块**  
   - 模型：`user.py`, `resume.py`, `job.py`, `mongodb_models.py`  
   - 接口：`auth.py`, `users.py`, `jobs.py`, `resumes.py`, `parsed_resumes.py`, `batch.py`, `export.py`, `files.py`, `source_files.py`, `monitoring.py`  
   - 服务：`resume_parser.py`, `filter_service.py`, `match_service.py`, `word_exporter.py`, `job_service.py`, `batch_service.py`, `deepseek_service.py`/`llm_service.py`

2. **需要迁移/重构的模块**  
   - 旧模板/会员/注册审核相关：`Template*` 前端页面、`templates.py`、`user_llm_config.py`、`registration_request.py` 等  
   - 旧管理后台：`src/pages/admin/*`, `admin.py` 等，重构为 `/api/v1/admin/*` + `frontend/admin/*`

3. **候选删除（谨慎）**  
   - 与“在线模板设计、组件拖拽、会员中心、注册审核”等老业务紧密绑定，而新简历机器人不再需要的代码。  
   - 删除前建议：  
     - 在此表中先标记为“候选删除”至少一轮  
     - 确认前端/后端无引用（可用 grep 搜索）  
     - 再通过一次性的清理 PR（或一次性删除操作）完成。

---

后续步骤：  
- 在此表基础上，我会按模块逐步**迁移“保留/重构”的代码到新架构**，迁移完成后，再和你确认一次“候选删除”列表，最后批量删除多余文件。 


