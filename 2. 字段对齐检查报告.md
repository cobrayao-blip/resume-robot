# å­—æ®µå¯¹é½æ£€æŸ¥æŠ¥å‘Š

**æ£€æŸ¥æ—¥æœŸ**: 2025-12-05  
**é—®é¢˜**: æ£€æŸ¥å­—æ®µåˆ—è¡¨å’Œschemaæ˜¯å¦å¯¹é½ï¼Œç‰¹åˆ«æ˜¯"å‡ºç”Ÿå¹´æœˆ"ä½¿ç”¨`birth_date`è¿˜æ˜¯`birthday`

---

## ğŸ” å‘ç°çš„ä¸ä¸€è‡´é—®é¢˜

### 1. å‡ºç”Ÿå¹´æœˆå­—æ®µä¸ä¸€è‡´

| ä½ç½® | ä½¿ç”¨çš„å­—æ®µå | è¯´æ˜ |
|------|-------------|------|
| **åç«¯è§£ææœåŠ¡** (`deepseek_service.py`) | `birthday` | åœ¨è§£æPromptå’Œå­—æ®µåŒ¹é…ä¸­ä½¿ç”¨ |
| **å‰ç«¯å­—æ®µå…ƒæ•°æ®** (`fieldMetadata.ts`) | `birth_date` | å­—æ®µå®šä¹‰ä½¿ç”¨ |
| **å‰ç«¯ç»„ä»¶å…ƒæ•°æ®** (`componentMetadata.ts`) | `birth_date` + `birthday` (å…¼å®¹) | åŒæ—¶æ”¯æŒä¸¤è€… |
| **åç«¯å­—æ®µåŒä¹‰è¯** (`field_synonyms.py`) | `birthday` + `birth_date` | ä¸¤è€…éƒ½æ”¯æŒï¼Œä½†æ ‡å‡†åŒ–è¿”å› `birthday` |
| **åç«¯å¯¼å‡ºæœåŠ¡** (`word_exporter.py`) | `birthday` | å¯¼å‡ºæ—¶ä½¿ç”¨ |

**ç»“è®º**: åç«¯ä¸»è¦ä½¿ç”¨ `birthday`ï¼Œå‰ç«¯ä¸»è¦ä½¿ç”¨ `birth_date`ï¼Œå­˜åœ¨ä¸ä¸€è‡´ã€‚

### 2. ç°å·¥ä½œåœ°å­—æ®µä¸ä¸€è‡´

| ä½ç½® | ä½¿ç”¨çš„å­—æ®µå | è¯´æ˜ |
|------|-------------|------|
| **åç«¯è§£ææœåŠ¡** (`deepseek_service.py`) | `current_work_location` | åœ¨è§£æPromptä¸­ä½¿ç”¨ |
| **å‰ç«¯å­—æ®µå…ƒæ•°æ®** (`fieldMetadata.ts`) | `current_location` | å­—æ®µå®šä¹‰ä½¿ç”¨ |
| **å‰ç«¯ç»„ä»¶å…ƒæ•°æ®** (`componentMetadata.ts`) | `current_location` + `current_work_location` (å…¼å®¹) | åŒæ—¶æ”¯æŒä¸¤è€… |
| **åç«¯å­—æ®µåŒä¹‰è¯** (`field_synonyms.py`) | `current_location` + `current_work_location` | ä¸¤è€…éƒ½æ”¯æŒï¼Œä½†æ ‡å‡†åŒ–è¿”å›ä¸åŒå€¼ |

**ç»“è®º**: åç«¯ä¸»è¦ä½¿ç”¨ `current_work_location`ï¼Œå‰ç«¯ä¸»è¦ä½¿ç”¨ `current_location`ï¼Œå­˜åœ¨ä¸ä¸€è‡´ã€‚

---

## ğŸ“‹ è¯¦ç»†æ£€æŸ¥ç»“æœ

### åç«¯Schemaå®šä¹‰

**æ–‡ä»¶**: `backend/app/schemas/resume.py`

```python
class ResumeData(BaseModel):
    basic_info: Dict[str, Any]  # ä½¿ç”¨å­—å…¸ï¼Œå­—æ®µåä¸å›ºå®š
```

**è¯´æ˜**: åç«¯Schemaä½¿ç”¨ `Dict[str, Any]`ï¼Œå­—æ®µåä¸å›ºå®šï¼Œè¿™å¯¼è‡´ä¸ä¸€è‡´é—®é¢˜ã€‚

### åç«¯è§£ææœåŠ¡å­—æ®µå®šä¹‰

**æ–‡ä»¶**: `backend/app/services/deepseek_service.py`

**è§£æPromptä¸­å®šä¹‰çš„å­—æ®µ** (ç¬¬281è¡Œ):
```python
"birthday": "string|nullï¼ˆå‡ºç”Ÿæ—¥æœŸï¼Œæ ¼å¼ï¼šYYYY-MM æˆ– YYYY.MMï¼‰",
"current_work_location": "string|nullï¼ˆç°å·¥ä½œåœ°ï¼‰"
```

**å­—æ®µåŒ¹é…ä»£ç ** (ç¬¬2141è¡Œ):
```python
elif field_id in ["birthday", "birth_date"]:
    value = basic_info.get("birthday", "") or basic_info.get("birth_date", "") or ...
```

**ç»“è®º**: åç«¯è§£ææœåŠ¡æœŸæœ›ä½¿ç”¨ `birthday` å’Œ `current_work_location`ï¼Œä½†ä»£ç ä¸­åšäº†å…¼å®¹å¤„ç†ã€‚

### å‰ç«¯å­—æ®µå®šä¹‰

**æ–‡ä»¶**: `frontend/src/utils/fieldMetadata.ts`

```typescript
'birth_date': {
  description: 'å‡ºç”Ÿå¹´æœˆ',
  dataSource: 'basic_info.birth_date',
  ...
},
'current_location': {
  description: 'ç°å·¥ä½œåœ°ï¼Œå½“å‰å·¥ä½œçš„åŸå¸‚æˆ–åœ°åŒº',
  dataSource: 'basic_info.current_location',
  ...
}
```

**ç»“è®º**: å‰ç«¯æœŸæœ›ä½¿ç”¨ `birth_date` å’Œ `current_location`ã€‚

### å‰ç«¯ç»„ä»¶å…ƒæ•°æ®

**æ–‡ä»¶**: `frontend/src/utils/componentMetadata.ts`

```typescript
fieldMapping: {
  'birth_date': 'basic_info.birth_date',
  'birthday': 'basic_info.birth_date',  // å…¼å®¹
  'current_location': 'basic_info.current_location',
  'current_work_location': 'basic_info.current_location',  // å…¼å®¹
}
```

**ç»“è®º**: å‰ç«¯åšäº†å…¼å®¹å¤„ç†ï¼Œä½†ä¸»è¦ä½¿ç”¨ `birth_date` å’Œ `current_location`ã€‚

---

## âš ï¸ é—®é¢˜å½±å“

1. **æ•°æ®ä¸ä¸€è‡´**: åç«¯è§£æè¿”å› `birthday`ï¼Œå‰ç«¯æœŸæœ› `birth_date`ï¼Œå¯èƒ½å¯¼è‡´å­—æ®µæ— æ³•æ­£ç¡®æ˜ å°„
2. **å…¼å®¹æ€§å¤„ç†**: è™½ç„¶ä»£ç ä¸­æœ‰å…¼å®¹å¤„ç†ï¼Œä½†å¢åŠ äº†å¤æ‚æ€§å’Œæ½œåœ¨bug
3. **ç»´æŠ¤å›°éš¾**: å­—æ®µåä¸ç»Ÿä¸€ï¼Œå¢åŠ ç»´æŠ¤æˆæœ¬

---

## âœ… å»ºè®®çš„ä¿®å¤æ–¹æ¡ˆ

### æ–¹æ¡ˆ1: ç»Ÿä¸€ä½¿ç”¨ `birth_date` å’Œ `current_location`ï¼ˆæ¨èï¼‰

**ç†ç”±**:
- å‰ç«¯å·²ç»ä¸»è¦ä½¿ç”¨è¿™äº›å­—æ®µå
- å­—æ®µåæ›´è§„èŒƒï¼ˆä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”ï¼‰
- ä¸ `fieldMetadata.ts` ä¿æŒä¸€è‡´

**éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶**:
1. `backend/app/services/deepseek_service.py`
   - ä¿®æ”¹è§£æPromptä¸­çš„å­—æ®µå
   - æ›´æ–°å­—æ®µåŒ¹é…é€»è¾‘
2. `backend/app/services/word_exporter.py`
   - æ›´æ–°å¯¼å‡ºæ—¶ä½¿ç”¨çš„å­—æ®µå
3. `backend/app/services/field_synonyms.py`
   - æ›´æ–°æ ‡å‡†åŒ–å­—æ®µåé€»è¾‘

### æ–¹æ¡ˆ2: ç»Ÿä¸€ä½¿ç”¨ `birthday` å’Œ `current_work_location`

**ç†ç”±**:
- åç«¯å·²ç»ä¸»è¦ä½¿ç”¨è¿™äº›å­—æ®µå
- å‡å°‘åç«¯ä¿®æ”¹

**éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶**:
1. `frontend/src/utils/fieldMetadata.ts`
   - ä¿®æ”¹å­—æ®µå®šä¹‰
2. `frontend/src/utils/componentMetadata.ts`
   - æ›´æ–°å­—æ®µæ˜ å°„
3. `frontend/src/components/template/ComponentLibrary.tsx`
   - æ›´æ–°é»˜è®¤å­—æ®µåˆ—è¡¨

---

## ğŸ”§ æ¨èå®æ–½æ–¹æ¡ˆ

**å»ºè®®é‡‡ç”¨æ–¹æ¡ˆ1**ï¼Œç»Ÿä¸€ä½¿ç”¨ `birth_date` å’Œ `current_location`ï¼Œå› ä¸ºï¼š
1. å‰ç«¯å·²ç»ä¸»è¦ä½¿ç”¨è¿™äº›å­—æ®µ
2. å­—æ®µåæ›´è§„èŒƒ
3. åªéœ€è¦ä¿®æ”¹åç«¯ï¼Œå‰ç«¯æ”¹åŠ¨è¾ƒå°

---

## ğŸ“ å…¶ä»–å­—æ®µæ£€æŸ¥

### åŸºæœ¬ä¿¡æ¯å­—æ®µå®Œæ•´åˆ—è¡¨

æ ¹æ®éœ€æ±‚æ–‡æ¡£å’Œä»£ç æ£€æŸ¥ï¼ŒåŸºæœ¬ä¿¡æ¯åº”åŒ…å«ï¼š

| å­—æ®µID | åç«¯ä½¿ç”¨ | å‰ç«¯ä½¿ç”¨ | çŠ¶æ€ |
|--------|---------|---------|------|
| `name` | âœ… | âœ… | ä¸€è‡´ |
| `gender` | âœ… | âœ… | ä¸€è‡´ |
| `birth_date` / `birthday` | âŒ `birthday` | âœ… `birth_date` | **ä¸ä¸€è‡´** |
| `email` | âœ… | âœ… | ä¸€è‡´ |
| `phone` | âœ… | âœ… | ä¸€è‡´ |
| `wechat` | â“ | âœ… | éœ€æ£€æŸ¥åç«¯ |
| `hometown` | âœ… | âœ… | ä¸€è‡´ |
| `family_location` | âœ… | âœ… | ä¸€è‡´ |
| `current_location` / `current_work_location` | âŒ `current_work_location` | âœ… `current_location` | **ä¸ä¸€è‡´** |
| `marital_status` | âœ… | âœ… | ä¸€è‡´ |
| `onboard_date` | â“ | âœ… | éœ€æ£€æŸ¥åç«¯ |
| `other_info` | â“ | âœ… | éœ€æ£€æŸ¥åç«¯ |

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **ç«‹å³ä¿®å¤**: ç»Ÿä¸€ `birthday` / `birth_date` å’Œ `current_work_location` / `current_location`
2. **æ£€æŸ¥ç¼ºå¤±å­—æ®µ**: ç¡®è®¤åç«¯æ˜¯å¦æ”¯æŒ `wechat`ã€`onboard_date`ã€`other_info`
3. **æ›´æ–°æ–‡æ¡£**: æ›´æ–°å­—æ®µå®šä¹‰æ–‡æ¡£ï¼Œæ˜ç¡®æ ‡å‡†å­—æ®µå

---

**æ£€æŸ¥å®Œæˆæ—¥æœŸ**: 2025-12-05

