# å¢å¼ºéƒ¨åˆ†Schemaç»“æ„æ£€æŸ¥æŠ¥å‘Š

**æ£€æŸ¥æ—¥æœŸ**: 2025-12-05  
**æ£€æŸ¥èŒƒå›´**: åç«¯è§£ææœåŠ¡ä¸­çš„å¢å¼ºéƒ¨åˆ†schemaç»“æ„

---

## ğŸ“‹ Schemaç»“æ„æ£€æŸ¥

### 1. åŸºç¡€è§£æSchemaï¼ˆparse_resume_textï¼‰

**ä½ç½®**: `backend/app/services/deepseek_service.py` ç¬¬276-326è¡Œ

#### å·¥ä½œç»å†å¢å¼ºå­—æ®µ
```json
{
  "work_experiences": [{
    "responsibilities": { 
      "raw": ["string"], 
      "optimized": ["string"], 
      "source_paragraphs": ["string"] 
    },
    "achievements": { 
      "raw": ["string"], 
      "optimized": ["string"], 
      "source_paragraphs": ["string"] 
    },
    "skills_used": { 
      "explicit": ["string"], 
      "implicit": ["string"], 
      "application_context": "string" 
    },
    "implicit_info": {
      "team_size": "string", 
      "team_size_basis": "string",
      "business_domain": "string", 
      "domain_basis": "string",
      "tech_stack": ["string"], 
      "tech_stack_basis": "string"
    },
    "related_projects": [{ 
      "project_name": "string", 
      "relation_type": "string", 
      "relation_basis": "string" 
    }],
    "_paragraphs": [{ 
      "text": "string", 
      "type": "string", 
      "importance": "high|medium|low", 
      "extracted_fields": ["string"] 
    }]
  }]
}
```

#### é¡¹ç›®ç»å†å¢å¼ºå­—æ®µ
```json
{
  "projects": [{
    "description": { 
      "raw": "string", 
      "optimized": "string", 
      "source": "string" 
    },
    "achievements": { 
      "raw": "string", 
      "optimized": "string", 
      "source": "string" 
    }
  }]
}
```

#### æŠ€èƒ½å¢å¼ºå­—æ®µ
```json
{
  "skills": {
    "technical": { 
      "explicit": ["string"], 
      "inferred": ["string"], 
      "application_context": "string" 
    },
    "soft": ["string"], 
    "languages": ["string"]
  }
}
```

---

### 2. å¢å¼ºæœåŠ¡Schemaï¼ˆ_run_full_enhancementï¼‰

**ä½ç½®**: `backend/app/services/deepseek_service.py` ç¬¬1402-1449è¡Œ

#### å·¥ä½œç»å†å¢å¼ºå­—æ®µ
```json
{
  "work_experiences": [{
    "responsibilities": { 
      "raw": ["string"], 
      "optimized": ["string"], 
      "source_paragraphs": ["string"] 
    },
    "achievements": { 
      "raw": ["string"], 
      "optimized": ["string"], 
      "source_paragraphs": ["string"] 
    },
    "skills_used": { 
      "explicit": ["string"], 
      "implicit": ["string"], 
      "application_context": "string?" 
    },
    "implicit_info": {
      "team_size": "string?",
      "team_size_basis": "string?",
      "business_domain": "string?",
      "domain_basis": "string?",
      "tech_stack": ["string"],
      "tech_stack_basis": "string?"
    },
    "related_projects": [{ 
      "project_name": "string", 
      "relation_type": "string", 
      "relation_basis": "string" 
    }],
    "report_to": "string?",
    "reason_for_leaving": "string?"
  }]
}
```

#### é¡¹ç›®ç»å†å¢å¼ºå­—æ®µ
```json
{
  "projects": [{
    "description": { 
      "raw": "string", 
      "optimized": "string", 
      "source": "string" 
    },
    "role": "string?",
    "achievements": { 
      "raw": "string", 
      "optimized": "string", 
      "source": "string" 
    },
    "related_work": "string?",
    "related_work_basis": "string?"
  }]
}
```

#### æŠ€èƒ½å¢å¼ºå­—æ®µ
```json
{
  "skills": {
    "technical": { 
      "explicit": ["string"], 
      "inferred": ["string"], 
      "application_context": "string?" 
    },
    "soft": ["string"],
    "languages": ["string"]
  }
}
```

---

### 3. åˆ†ç‰‡å¢å¼ºSchemaï¼ˆ_enhance_resume_in_chunksï¼‰

**ä½ç½®**: `backend/app/services/deepseek_service.py` ç¬¬1575-1600è¡Œ

**ç»“æ„**: ä¸ `_run_full_enhancement` ç›¸åŒ

---

## âœ… Schemaä¸€è‡´æ€§æ£€æŸ¥

### å·¥ä½œç»å†å¢å¼ºå­—æ®µå¯¹æ¯”

| å­—æ®µ | åŸºç¡€è§£æ | å¢å¼ºæœåŠ¡ | çŠ¶æ€ |
|------|---------|---------|------|
| `responsibilities.raw` | âœ… | âœ… | âœ… ä¸€è‡´ |
| `responsibilities.optimized` | âœ… | âœ… | âœ… ä¸€è‡´ |
| `responsibilities.source_paragraphs` | âœ… | âœ… | âœ… ä¸€è‡´ |
| `achievements.raw` | âœ… | âœ… | âœ… ä¸€è‡´ |
| `achievements.optimized` | âœ… | âœ… | âœ… ä¸€è‡´ |
| `achievements.source_paragraphs` | âœ… | âœ… | âœ… ä¸€è‡´ |
| `skills_used.explicit` | âœ… | âœ… | âœ… ä¸€è‡´ |
| `skills_used.implicit` | âœ… | âœ… | âœ… ä¸€è‡´ |
| `skills_used.application_context` | âœ… string | âœ… string? | âš ï¸ å¯ç©ºæ€§ä¸åŒ |
| `implicit_info.team_size` | âœ… string | âœ… string? | âš ï¸ å¯ç©ºæ€§ä¸åŒ |
| `implicit_info.team_size_basis` | âœ… string | âœ… string? | âš ï¸ å¯ç©ºæ€§ä¸åŒ |
| `implicit_info.business_domain` | âœ… string | âœ… string? | âš ï¸ å¯ç©ºæ€§ä¸åŒ |
| `implicit_info.domain_basis` | âœ… string | âœ… string? | âš ï¸ å¯ç©ºæ€§ä¸åŒ |
| `implicit_info.tech_stack` | âœ… ["string"] | âœ… ["string"] | âœ… ä¸€è‡´ |
| `implicit_info.tech_stack_basis` | âœ… string | âœ… string? | âš ï¸ å¯ç©ºæ€§ä¸åŒ |
| `related_projects` | âœ… | âœ… | âœ… ä¸€è‡´ |
| `_paragraphs` | âœ… | âŒ | âš ï¸ å¢å¼ºæœåŠ¡ä¸­ç¼ºå¤± |
| `report_to` | âœ… | âœ… | âœ… ä¸€è‡´ |
| `reason_for_leaving` | âœ… | âœ… | âœ… ä¸€è‡´ |

### é¡¹ç›®ç»å†å¢å¼ºå­—æ®µå¯¹æ¯”

| å­—æ®µ | åŸºç¡€è§£æ | å¢å¼ºæœåŠ¡ | çŠ¶æ€ |
|------|---------|---------|------|
| `description.raw` | âœ… | âœ… | âœ… ä¸€è‡´ |
| `description.optimized` | âœ… | âœ… | âœ… ä¸€è‡´ |
| `description.source` | âœ… | âœ… | âœ… ä¸€è‡´ |
| `achievements.raw` | âœ… | âœ… | âœ… ä¸€è‡´ |
| `achievements.optimized` | âœ… | âœ… | âœ… ä¸€è‡´ |
| `achievements.source` | âœ… | âœ… | âœ… ä¸€è‡´ |
| `related_work` | âœ… | âœ… | âœ… ä¸€è‡´ |
| `related_work_basis` | âœ… | âœ… | âœ… ä¸€è‡´ |

### æŠ€èƒ½å¢å¼ºå­—æ®µå¯¹æ¯”

| å­—æ®µ | åŸºç¡€è§£æ | å¢å¼ºæœåŠ¡ | çŠ¶æ€ |
|------|---------|---------|------|
| `technical.explicit` | âœ… | âœ… | âœ… ä¸€è‡´ |
| `technical.inferred` | âœ… | âœ… | âœ… ä¸€è‡´ |
| `technical.application_context` | âœ… string | âœ… string? | âš ï¸ å¯ç©ºæ€§ä¸åŒ |
| `soft` | âœ… | âœ… | âœ… ä¸€è‡´ |
| `languages` | âœ… | âœ… | âœ… ä¸€è‡´ |

---

## âš ï¸ å‘ç°çš„é—®é¢˜

### 1. å¯ç©ºæ€§æ ‡è®°ä¸ä¸€è‡´

**é—®é¢˜**: åŸºç¡€è§£æschemaä¸­éƒ¨åˆ†å­—æ®µæœªæ ‡è®°ä¸ºå¯ç©ºï¼ˆ`string`ï¼‰ï¼Œä½†å¢å¼ºæœåŠ¡schemaä¸­æ ‡è®°ä¸ºå¯ç©ºï¼ˆ`string?`ï¼‰

**å½±å“**: 
- åŸºç¡€è§£æå¯èƒ½è¿”å›éç©ºå€¼
- å¢å¼ºæœåŠ¡æ˜ç¡®æ ‡è®°å¯ç©ºï¼Œæ›´ç¬¦åˆå®é™…æƒ…å†µ
- è¿™ç§å·®å¼‚æ˜¯åˆç†çš„ï¼Œå› ä¸ºå¢å¼ºæœåŠ¡æ›´æ³¨é‡å­—æ®µçš„å¯é€‰æ€§

**å»ºè®®**: ä¿æŒç°çŠ¶ï¼Œå¢å¼ºæœåŠ¡çš„å¯ç©ºæ€§æ ‡è®°æ›´å‡†ç¡®

### 2. `_paragraphs` å­—æ®µç¼ºå¤±

**é—®é¢˜**: å¢å¼ºæœåŠ¡schemaä¸­ç¼ºå°‘ `_paragraphs` å­—æ®µ

**ä½ç½®**: 
- åŸºç¡€è§£æschemaä¸­æœ‰ `_paragraphs` å­—æ®µï¼ˆç¬¬304è¡Œï¼‰
- å¢å¼ºæœåŠ¡schemaä¸­æ²¡æœ‰æ­¤å­—æ®µ

**å½±å“**: 
- å¢å¼ºæœåŠ¡ä¸ä¼šç”Ÿæˆ `_paragraphs` å­—æ®µ
- å¦‚æœåŸºç¡€è§£æå·²æœ‰æ­¤å­—æ®µï¼Œå¢å¼ºæœåŠ¡ä¼šä¿ç•™
- å¦‚æœåŸºç¡€è§£ææ²¡æœ‰ï¼Œå¢å¼ºæœåŠ¡ä¸ä¼šæ·»åŠ 

**å»ºè®®**: è¿™æ˜¯è®¾è®¡ä¸Šçš„å·®å¼‚ï¼Œå¢å¼ºæœåŠ¡ä¸“æ³¨äºå†…å®¹ä¼˜åŒ–ï¼Œä¸éœ€è¦æ®µè½ä¿¡æ¯

---

## âœ… Schemaç»“æ„å®Œæ•´æ€§

### å¢å¼ºå­—æ®µç»“æ„å®Œæ•´æ€§

1. **å·¥ä½œç»å†å¢å¼ºå­—æ®µ** âœ…
   - `responsibilities`: raw + optimized + source_paragraphs
   - `achievements`: raw + optimized + source_paragraphs
   - `skills_used`: explicit + implicit + application_context
   - `implicit_info`: å®Œæ•´çš„éšå«ä¿¡æ¯ç»“æ„
   - `related_projects`: å…³è”é¡¹ç›®ä¿¡æ¯

2. **é¡¹ç›®ç»å†å¢å¼ºå­—æ®µ** âœ…
   - `description`: raw + optimized + source
   - `achievements`: raw + optimized + source
   - `related_work`: å…³è”å·¥ä½œä¿¡æ¯

3. **æŠ€èƒ½å¢å¼ºå­—æ®µ** âœ…
   - `technical`: explicit + inferred + application_context
   - `soft`: è½¯æŠ€èƒ½åˆ—è¡¨
   - `languages`: è¯­è¨€èƒ½åŠ›åˆ—è¡¨

---

## ğŸ“Š Schemaä½¿ç”¨æƒ…å†µ

### åœ¨ä»£ç ä¸­çš„ä½¿ç”¨

1. **æ•°æ®è§£æå’Œè§„èŒƒåŒ–** (`resume_parser.py`)
   - æ­£ç¡®å¤„ç†å¢å¼ºå­—æ®µçš„å¯¹è±¡æ ¼å¼
   - æå–rawä½œä¸ºé»˜è®¤å€¼
   - ä¿ç•™å®Œæ•´å¯¹è±¡åœ¨ `_enhanced` ä¸­

2. **å­—æ®µåŒ¹é…** (`deepseek_service.py`)
   - ä¼˜å…ˆä½¿ç”¨optimizedç‰ˆæœ¬
   - æ”¯æŒrawå’Œoptimizedçš„è‡ªåŠ¨é€‰æ‹©
   - å¤„ç†å¢å¼ºæ•°æ®çš„æ™ºèƒ½åŒ¹é…

3. **æ•°æ®å¡«å……** (`deepseek_service.py`)
   - ä»å¢å¼ºä¿¡æ¯ä¸­æå–æ•°æ®
   - æ”¯æŒå¤šç§æ•°æ®æ ¼å¼çš„å…¼å®¹

---

## ğŸ¯ æ€»ç»“

### Schemaç»“æ„çŠ¶æ€

- âœ… **ç»“æ„å®Œæ•´**: æ‰€æœ‰å¢å¼ºå­—æ®µéƒ½æœ‰æ˜ç¡®çš„å®šä¹‰
- âœ… **ç»“æ„ä¸€è‡´**: åŸºç¡€è§£æå’Œå¢å¼ºæœåŠ¡çš„schemaåŸºæœ¬ä¸€è‡´
- âš ï¸ **å¯ç©ºæ€§å·®å¼‚**: å¢å¼ºæœåŠ¡æ›´æ˜ç¡®åœ°æ ‡è®°å¯ç©ºå­—æ®µï¼ˆè¿™æ˜¯åˆç†çš„ï¼‰
- âš ï¸ **å­—æ®µå·®å¼‚**: `_paragraphs` å­—æ®µåœ¨å¢å¼ºæœåŠ¡ä¸­ç¼ºå¤±ï¼ˆè¿™æ˜¯è®¾è®¡ä¸Šçš„å·®å¼‚ï¼‰

### å»ºè®®

1. **ä¿æŒç°çŠ¶**: Schemaç»“æ„æ˜¯åˆç†çš„ï¼Œä¸éœ€è¦ä¿®æ”¹
2. **æ–‡æ¡£è¯´æ˜**: å¯ä»¥åœ¨æ³¨é‡Šä¸­è¯´æ˜ `_paragraphs` å­—æ®µåªåœ¨åŸºç¡€è§£æä¸­ç”Ÿæˆ
3. **å¯ç©ºæ€§**: å¢å¼ºæœåŠ¡ä¸­çš„å¯ç©ºæ€§æ ‡è®°æ›´å‡†ç¡®ï¼Œå»ºè®®ä¿æŒ

---

**æ£€æŸ¥å®Œæˆæ—¥æœŸ**: 2025-12-05  
**æ£€æŸ¥ç»“æœ**: âœ… Schemaç»“æ„å®Œæ•´ä¸”åˆç†ï¼Œæ— éœ€ä¿®æ”¹

