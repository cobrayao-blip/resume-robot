# 管理后台架构说明

## 当前架构设计

### 1. SaaS平台管理后台（`frontend/admin`）
**访问地址**：`http://localhost:5174`  
**用户角色**：平台管理员（`platform_admin`）  
**主要功能**：
- ✅ 租户管理（创建、编辑、激活、暂停租户）
- ✅ 订阅管理（套餐配置、订阅续费、使用量监控）
- ✅ 系统配置（LLM服务配置、系统参数、功能开关）
- ✅ 数据统计（平台整体数据、租户使用分析、收入统计）

**职责**：管理整个SaaS平台，不涉及具体租户的业务数据。

---

### 2. HR工作台（`frontend/app`）
**访问地址**：`http://localhost:5173`  
**用户角色**：
- **HR用户**（`hr_user`）：处理简历、岗位管理、匹配、报告生成
- **租户管理员**（`tenant_admin`）：除了HR功能外，还可以访问"系统设置"

**主要功能**：

#### 2.1 核心业务功能（所有HR用户）
- 简历管理（简历总库、岗位简历库、过滤箱）
- 岗位管理（创建、编辑、查看岗位）
- 匹配结果（查看简历与岗位的匹配度）
- 推荐报告（生成和查看推荐报告）

#### 2.2 系统设置功能（仅租户管理员可见）
- 组织架构管理（部门管理）
- 公司信息配置（用于LLM Prompt增强）
- 筛选规则配置（预筛选规则）
- 用户管理（管理租户内的用户）
- 订阅管理（查看租户的订阅信息和使用量）

**职责**：处理租户内的业务数据，租户管理员可以配置租户级别的系统设置。

---

## 架构设计说明

### 为什么这样设计？

1. **职责分离清晰**：
   - 平台管理后台：管理SaaS平台本身（租户、订阅、系统配置）
   - HR工作台：处理业务数据（简历、岗位、匹配）
   - 租户管理功能：集成在HR工作台的"系统设置"中

2. **用户体验优化**：
   - 租户管理员不需要切换系统，在同一个工作台中既能处理业务，又能管理配置
   - HR用户专注于业务处理，不会被管理功能干扰

3. **权限控制简单**：
   - 通过 `isTenantAdmin` 判断，动态显示/隐藏"系统设置"菜单
   - 前端路由守卫确保只有租户管理员可以访问设置页面

---

## 当前实现状态

### ✅ 已实现
- [x] SaaS平台管理后台（`frontend/admin`）
  - [x] 租户管理页面（占位符）
  - [x] 订阅管理页面（占位符）
  - [x] 系统配置页面（占位符）
  - [x] 数据统计页面（占位符）

- [x] HR工作台（`frontend/app`）
  - [x] 简历管理（占位符）
  - [x] 岗位管理（已实现）
  - [x] 匹配结果（已实现）
  - [x] 推荐报告（占位符）
  - [x] 组织架构管理（已实现）
  - [x] 公司信息配置（已实现）
  - [x] 筛选规则配置（占位符）
  - [x] 用户管理（占位符）
  - [x] 订阅管理（占位符）

### ⏳ 待完善
- [ ] 完善所有占位符页面的功能实现
- [ ] 完善权限控制（API级别和前端路由级别）
- [ ] 完善数据统计和报表功能

---

## 是否需要调整？

### 选项A：保持当前设计（推荐）
**优点**：
- 职责清晰，用户体验好
- 租户管理员不需要切换系统
- 实现简单，维护成本低

**缺点**：
- 租户管理功能与业务功能混在一起，可能不够直观

### 选项B：分离租户管理后台
**方案**：创建第三个前端应用 `frontend/tenant-admin`
- `frontend/admin`：SaaS平台管理后台（管理所有租户）
- `frontend/tenant-admin`：租户管理后台（管理租户内部配置）
- `frontend/app`：HR工作台（纯业务功能）

**优点**：
- 职责更加清晰，三个系统完全独立
- 租户管理功能更加突出

**缺点**：
- 需要维护三个前端应用
- 租户管理员需要切换系统
- 开发工作量增加

---

## 建议

**建议保持当前设计（选项A）**，原因：
1. 当前设计已经符合SaaS架构的最佳实践
2. 租户管理员在同一个工作台中既能处理业务，又能管理配置，用户体验更好
3. 通过权限控制（`isTenantAdmin`）已经实现了功能分离
4. 如果后续需要，可以随时将"系统设置"部分独立出来

**如果确实需要分离**，我们可以：
1. 创建 `frontend/tenant-admin` 应用
2. 将"系统设置"相关页面迁移到新应用
3. 更新路由和权限控制

---

## 总结

**当前架构**：
- **SaaS平台管理后台**（`frontend/admin`）：管理所有租户
- **HR工作台**（`frontend/app`）：处理业务数据 + 租户管理（仅租户管理员可见）

**这个设计是合理的**，符合SaaS架构的最佳实践。租户管理功能集成在HR工作台中，通过权限控制实现功能分离，既保证了职责清晰，又优化了用户体验。

