# 下一步开发计划

## 📊 当前项目状态

### ✅ 已完成
1. **前端架构**：双前端应用（HR工作台 + 平台管理后台）
2. **多租户架构**：tenant_id支持、权限控制
3. **组织架构管理**：部门CRUD、树形结构
4. **岗位管理**：岗位创建、列表、详情、部门关联
5. **公司信息设置**：完整字段支持
6. **匹配系统**：匹配算法、向量相似度、匹配度融合
7. **Prompt工程**：PromptBuilder统一构建LLM Prompt

### ⏳ 待完成（占位符页面）
1. **简历管理**：简历总库、岗位简历库、过滤箱
2. **推荐报告**：报告列表、报告生成
3. **系统设置**：筛选规则、用户管理、订阅管理
4. **管理后台**：租户管理、订阅管理、系统配置、数据统计

### ⚠️ 待完善（后端功能）
1. **Embedding API**：目前是占位符，需要实现实际的embedding生成
2. **简历管理API**：简历上传、解析、存储
3. **推荐报告API**：报告生成、下载
4. **筛选规则API**：规则CRUD、规则执行
5. **用户管理API**：租户内用户管理
6. **管理后台API**：租户管理、订阅管理等

---

## 🎯 开发优先级

### 第一阶段：核心业务流程（高优先级）

#### 1. 简历管理功能 ⭐⭐⭐
**目标**：实现简历上传、解析、存储的核心功能

**后端工作**：
- [ ] 完善简历上传API（`/api/v1/resumes/upload`）
- [ ] 完善简历解析服务（PDF/DOCX解析）
- [ ] 实现简历存储（PostgreSQL + MongoDB）
- [ ] 实现简历总库查询API
- [ ] 实现岗位简历库查询API
- [ ] 实现过滤箱查询API

**前端工作**：
- [ ] 实现简历总库页面（`TalentPool.tsx`）
  - 简历列表（分页、搜索、筛选）
  - 简历上传（单文件、批量）
  - 简历详情查看
  - 简历删除
- [ ] 实现岗位简历库页面（`JobResumePool.tsx`）
  - 从岗位入口上传简历
  - 岗位简历列表
  - 简历匹配操作
- [ ] 实现过滤箱页面（`FilterBox.tsx`）
  - 被过滤的简历列表
  - 恢复简历功能

**预计工作量**：3-5天

---

#### 2. 推荐报告生成 ⭐⭐⭐
**目标**：实现推荐报告的生成和下载功能

**后端工作**：
- [ ] 完善报告生成API（`/api/v1/reports/generate`）
- [ ] 实现报告模板渲染（使用现有模板系统）
- [ ] 实现报告下载（Word文档）
- [ ] 实现报告列表查询API

**前端工作**：
- [ ] 实现报告列表页面（`ReportList.tsx`）
  - 报告列表（分页、搜索）
  - 报告预览
  - 报告下载
- [ ] 实现报告生成页面（`ReportGenerate.tsx`）
  - 选择匹配结果
  - 选择报告模板
  - 生成报告

**预计工作量**：2-3天

---

#### 3. 筛选规则管理 ⭐⭐
**目标**：实现预筛选规则的配置和执行

**后端工作**：
- [ ] 完善筛选规则API（CRUD）
- [ ] 完善筛选规则执行服务（`filter_service.py`）
- [ ] 实现规则测试功能

**前端工作**：
- [ ] 实现筛选规则管理页面（`FilterRules.tsx`）
  - 规则列表
  - 规则创建/编辑
  - 规则测试
  - 规则启用/禁用

**预计工作量**：2-3天

---

### 第二阶段：系统完善（中优先级）

#### 4. 用户管理 ⭐⭐
**目标**：实现租户内用户管理功能

**后端工作**：
- [ ] 实现用户管理API（租户内用户CRUD）
- [ ] 实现用户邀请功能
- [ ] 实现角色分配功能

**前端工作**：
- [ ] 实现用户管理页面（`UserManagement.tsx`）
  - 用户列表
  - 用户创建/编辑
  - 用户邀请
  - 角色分配

**预计工作量**：2天

---

#### 5. 订阅管理（租户侧） ⭐
**目标**：租户管理员查看订阅信息和使用量

**后端工作**：
- [ ] 实现订阅信息查询API
- [ ] 实现使用量统计API

**前端工作**：
- [ ] 实现订阅管理页面（`Subscription.tsx`）
  - 订阅信息展示
  - 使用量统计
  - 套餐升级入口

**预计工作量**：1-2天

---

#### 6. Embedding API实现 ⭐⭐
**目标**：实现实际的embedding生成，替换占位符

**后端工作**：
- [ ] 集成DeepSeek Embedding API
- [ ] 或集成其他embedding服务（千问、sentence-transformers）
- [ ] 更新`VectorSimilarityCalculator`和`JobService`

**预计工作量**：1-2天

---

### 第三阶段：管理后台（低优先级）

#### 7. 平台管理后台功能 ⭐
**目标**：完善平台管理后台的所有功能

**后端工作**：
- [ ] 完善租户管理API
- [ ] 完善订阅管理API
- [ ] 完善系统配置API
- [ ] 实现数据统计API

**前端工作**：
- [ ] 实现租户管理页面（列表、详情、创建）
- [ ] 实现订阅管理页面（套餐配置、订阅列表）
- [ ] 实现系统配置页面（LLM配置、系统参数、功能开关）
- [ ] 实现数据统计页面（平台概览、租户统计、收入统计）

**预计工作量**：5-7天

---

## 🚀 立即开始：第一阶段开发

### 第一步：简历管理功能

**为什么先做这个？**
- 这是整个系统的数据入口
- 其他功能（匹配、报告）都依赖简历数据
- 是核心业务流程的第一步

**开发顺序**：
1. 后端：完善简历上传和解析API
2. 后端：实现简历存储和查询API
3. 前端：实现简历总库页面
4. 前端：实现岗位简历库页面
5. 前端：实现过滤箱页面

---

## 📝 开发注意事项

### 1. 数据隔离
- 所有API必须自动过滤`tenant_id`
- 前端不需要传递`tenant_id`，后端自动从JWT获取

### 2. 权限控制
- HR用户：只能访问业务功能
- 租户管理员：可以访问业务功能 + 系统设置
- 平台管理员：只能访问管理后台

### 3. 错误处理
- 前端：友好的错误提示
- 后端：详细的错误日志

### 4. 性能优化
- 简历解析：异步处理，避免阻塞
- 批量操作：支持批量上传、批量匹配
- 分页查询：所有列表都支持分页

---

## 🎯 成功标准

### MVP完成标准
- [x] 用户可以登录系统（HR工作台 + 管理后台）
- [x] 用户可以管理组织架构
- [x] 用户可以创建和管理岗位
- [ ] 用户可以上传简历并查看简历列表
- [ ] 用户可以查看匹配结果
- [ ] 用户可以生成推荐报告
- [ ] 租户管理员可以配置筛选规则
- [ ] 租户管理员可以管理用户

### 完整功能标准
- [ ] 所有占位符页面都有实际功能
- [ ] 所有API都有完整的错误处理
- [ ] 前端有完整的加载状态和错误提示
- [ ] 系统可以完整地处理简历从上传到报告生成的整个流程

---

## 📅 时间估算

### 第一阶段（核心业务流程）
- 简历管理：3-5天
- 推荐报告：2-3天
- 筛选规则：2-3天
- **小计**：7-11天

### 第二阶段（系统完善）
- 用户管理：2天
- 订阅管理：1-2天
- Embedding API：1-2天
- **小计**：4-6天

### 第三阶段（管理后台）
- 平台管理后台：5-7天
- **小计**：5-7天

### 总计
- **预计总时间**：16-24天（按每天4-6小时计算）

---

## 🎉 总结

**当前状态**：架构和基础设施已完成，核心业务流程待实现

**下一步**：立即开始实现简历管理功能，这是整个系统的数据入口

**目标**：完成MVP，实现从简历上传到报告生成的完整业务流程

