# 管理后台使用说明

## 访问地址

管理后台地址：**`http://localhost:5173/admin/dashboard`**（开发环境）

或：**`https://your-domain.com/admin/dashboard`**（生产环境）

## 管理员登录

### 创建管理员账户

1. **方法一：通过数据库直接设置**
   ```sql
   -- 将某个用户的 user_type 设置为 super_admin 或 template_designer
   UPDATE users SET user_type = 'super_admin' WHERE email = 'admin@example.com';
   ```

2. **方法二：通过注册后修改**
   - 先注册一个账户
   - 在数据库中将其 `user_type` 修改为 `super_admin` 或 `template_designer`
   - 将其 `registration_status` 设置为 `approved`

### 管理员类型

- **super_admin（超级管理员）**：拥有所有权限
- **template_designer（模板设计师）**：可以设计模板和管理用户

## 功能模块

### 1. 仪表盘（/admin/dashboard）
- 查看系统统计数据
- 用户总数、活跃用户、待审核申请等

### 2. 用户管理（/admin/users）
- 查看所有用户列表
- 编辑用户信息（用户类型、会员计划、使用限制等）
- 启用/禁用用户账户
- 搜索和筛选用户

### 3. 注册审核（/admin/registration-requests）
- 查看待审核的注册申请
- 批准或拒绝注册申请
- 查看申请详情（邮箱、姓名、公司、电话、申请理由等）
- 添加审核备注

### 4. 模板管理（/admin/templates）
- 查看所有模板（包括未发布的）
- 发布/下架模板（控制哪些模板对普通用户可见）
- 查看模板使用统计

## 使用流程

### 审核新用户注册

1. 用户注册后，会提交注册申请
2. 管理员登录管理后台
3. 进入"注册审核"页面
4. 查看待审核申请列表
5. 点击"审核"按钮，查看申请详情
6. 选择"批准"或"拒绝"，并填写审核备注
7. 提交审核

**批准后**：
- 系统会自动创建用户账户
- 用户可以使用注册时的邮箱和密码登录
- 用户默认为"试用用户"，每月3次使用限制

**拒绝后**：
- 申请状态更新为"已拒绝"
- 用户无法登录系统

### 管理用户

1. 进入"用户管理"页面
2. 可以搜索、筛选用户
3. 点击"编辑"按钮，可以修改：
   - 账户状态（启用/禁用）
   - 用户类型（试用用户/付费会员/模板设计师/超级管理员）
   - 会员计划（trial/basic/professional/enterprise）
   - 每月使用次数限制

### 发布模板

1. 进入"模板管理"页面
2. 找到要发布的模板
3. 切换"发布状态"开关
4. 模板发布后，普通用户可以在"简历生成"页面看到并使用

## 权限说明

### 普通用户（trial_user / premium_user）
- ✅ 可以访问：控制台、数据中心、简历生成、会员中心
- ❌ 不能访问：模板库、模板设计、管理后台

### 模板设计师（template_designer）
- ✅ 可以访问：所有普通用户功能 + 模板库、模板设计、管理后台

### 超级管理员（super_admin）
- ✅ 可以访问：所有功能，包括管理后台的所有模块

## 注意事项

1. **首次使用**：需要先在数据库中创建一个管理员账户
2. **审核流程**：新用户注册后必须经过管理员审核才能使用系统
3. **模板发布**：只有已发布的模板（`is_public=true`）才会显示给普通用户
4. **使用限制**：试用用户默认每月3次，可以在用户管理中修改

## 常见问题

**Q: 如何创建第一个管理员账户？**
A: 可以通过数据库直接设置，或者注册后修改数据库中的 `user_type` 字段。

**Q: 用户注册后无法登录？**
A: 检查用户的 `registration_status` 是否为 `approved`，只有审核通过的用户才能登录。

**Q: 普通用户看不到模板？**
A: 检查模板的 `is_public` 字段是否为 `true`，只有已发布的模板才会显示给普通用户。

