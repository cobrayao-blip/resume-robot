# åŸºæœ¬ä¿¡æ¯ç»„ä»¶å…ƒæ•°æ®ä¿®å¤è¯´æ˜

**ä¿®å¤æ—¥æœŸ**: 2025-12-05  
**é—®é¢˜**: åŸºæœ¬ä¿¡æ¯ç»„ä»¶ä¸­çš„å…ƒæ•°æ®å­˜åœ¨è‹±æ–‡å­—æ®µåä¸ä¸€è‡´å’Œç¼ºå¤±å­—æ®µçš„é—®é¢˜

---

## ğŸ” å‘ç°çš„é—®é¢˜

### 1. å­—æ®µåä¸ä¸€è‡´
- `componentMetadata.ts` ä½¿ç”¨ `birthday`ï¼Œä½† `fieldMetadata.ts` ä½¿ç”¨ `birth_date`
- `componentMetadata.ts` ä½¿ç”¨ `current_work_location`ï¼Œä½† `fieldMetadata.ts` ä½¿ç”¨ `current_location`

### 2. ç¼ºå¤±å­—æ®µ
æ ¹æ®éœ€æ±‚æ–‡æ¡£ï¼ˆå„ç»„ä»¶å…ƒæ•°æ®é…ç½®.mdï¼‰ï¼ŒåŸºæœ¬ä¿¡æ¯åº”è¯¥åŒ…å«ä»¥ä¸‹å­—æ®µï¼Œä½†éƒ¨åˆ†ç¼ºå¤±ï¼š
- âœ… å§“å (name)
- âœ… æ€§åˆ« (gender)
- âœ… å‡ºç”Ÿå¹´æœˆ (birth_date)
- âœ… é‚®ç®± (email)
- âœ… ç”µè¯ (phone)
- âŒ **å¾®ä¿¡ (wechat)** - ç¼ºå¤±
- âœ… ç±è´¯ (hometown)
- âœ… å®¶åº­æ‰€åœ¨ (family_location)
- âœ… ç°å·¥ä½œåœ° (current_location)
- âœ… å©šè‚²çŠ¶å†µ (marital_status)
- âŒ **å…¥èŒæ—¶é—´ (onboard_date)** - ç¼ºå¤±
- âŒ **å…¶ä»–ä¿¡æ¯ (other_info)** - ç¼ºå¤±

---

## âœ… ä¿®å¤å†…å®¹

### 1. æ›´æ–° `componentMetadata.ts`

**æ–‡ä»¶**: `frontend/src/utils/componentMetadata.ts`

**ä¿®æ”¹**:
- ç»Ÿä¸€å­—æ®µåï¼šä½¿ç”¨ `birth_date` å’Œ `current_location`ï¼ˆä¸ `fieldMetadata.ts` ä¸€è‡´ï¼‰
- æ·»åŠ å…¼å®¹æ˜ å°„ï¼šä¿ç•™ `birthday` å’Œ `current_work_location` ä½œä¸ºå…¼å®¹å­—æ®µ
- æ·»åŠ ç¼ºå¤±å­—æ®µï¼š
  - `wechat` (å¾®ä¿¡)
  - `onboard_date` (å…¥èŒæ—¶é—´)
  - `other_info` (å…¶ä»–ä¿¡æ¯)
- æ›´æ–°æè¿°ï¼šåŒ…å«æ‰€æœ‰12ä¸ªå­—æ®µçš„è¯´æ˜

**ä¿®æ”¹å‰**:
```typescript
fieldMapping: {
  'name': 'basic_info.name',
  'gender': 'basic_info.gender',
  'birthday': 'basic_info.birthday',  // âŒ å­—æ®µåä¸ä¸€è‡´
  'email': 'basic_info.email',
  'phone': 'basic_info.phone',
  'hometown': 'basic_info.hometown',
  'family_location': 'basic_info.family_location',
  'location': 'basic_info.location',
  'current_work_location': 'basic_info.current_work_location',  // âŒ å­—æ®µåä¸ä¸€è‡´
  'marital_status': 'basic_info.marital_status'
  // âŒ ç¼ºå°‘ wechat, onboard_date, other_info
}
```

**ä¿®æ”¹å**:
```typescript
fieldMapping: {
  'name': 'basic_info.name',
  'gender': 'basic_info.gender',
  'birth_date': 'basic_info.birth_date',  // âœ… ç»Ÿä¸€å­—æ®µå
  'birthday': 'basic_info.birth_date',    // âœ… å…¼å®¹æ—§å­—æ®µå
  'email': 'basic_info.email',
  'phone': 'basic_info.phone',
  'wechat': 'basic_info.wechat',          // âœ… æ–°å¢
  'hometown': 'basic_info.hometown',
  'family_location': 'basic_info.family_location',
  'location': 'basic_info.location',
  'current_location': 'basic_info.current_location',  // âœ… ç»Ÿä¸€å­—æ®µå
  'current_work_location': 'basic_info.current_location',  // âœ… å…¼å®¹æ—§å­—æ®µå
  'marital_status': 'basic_info.marital_status',
  'onboard_date': 'basic_info.onboard_date',  // âœ… æ–°å¢
  'other_info': 'basic_info.other_info'       // âœ… æ–°å¢
}
```

### 2. æ›´æ–° `ComponentLibrary.tsx`

**æ–‡ä»¶**: `frontend/src/components/template/ComponentLibrary.tsx`

**ä¿®æ”¹**:
- æ›´æ–°é»˜è®¤å­—æ®µåˆ—è¡¨ï¼Œä½¿ç”¨æ­£ç¡®çš„å­—æ®µå
- æ·»åŠ ç¼ºå¤±çš„å­—æ®µï¼š`wechat`, `onboard_date`, `other_info`
- ä½¿ç”¨ `birth_date` æ›¿ä»£ `birthday`
- ä½¿ç”¨ `current_location` æ›¿ä»£ `current_work_location`

**ä¿®æ”¹å‰**:
```typescript
defaultFields: ['name', 'gender', 'birthday', 'email', 'phone', 'location', 'hometown', 'family_location', 'current_work_location', 'marital_status']
```

**ä¿®æ”¹å**:
```typescript
defaultFields: ['name', 'gender', 'birth_date', 'email', 'phone', 'wechat', 'location', 'hometown', 'family_location', 'current_location', 'marital_status', 'onboard_date', 'other_info']
```

### 3. æ›´æ–° `fieldMapping.ts`

**æ–‡ä»¶**: `frontend/src/utils/fieldMapping.ts`

**ä¿®æ”¹**:
- æ·»åŠ ç¼ºå¤±å­—æ®µçš„ä¸­æ–‡æ˜ å°„ï¼š
  - `hometown`: 'ç±è´¯'
  - `family_location`: 'å®¶åº­æ‰€åœ¨'
  - `current_location`: 'ç°å·¥ä½œåœ°'
  - `current_work_location`: 'ç°å·¥ä½œåœ°' (å…¼å®¹)
  - `marital_status`: 'å©šè‚²çŠ¶å†µ' (æ›´æ–°)
  - `onboard_date`: 'å…¥èŒæ—¶é—´'
  - `other_info`: 'å…¶ä»–ä¿¡æ¯'

### 4. æ›´æ–° `TemplatePreview.tsx`

**æ–‡ä»¶**: `frontend/src/components/template/TemplatePreview.tsx`

**ä¿®æ”¹**:
- åœ¨ç¤ºä¾‹æ•°æ®ç”Ÿæˆå‡½æ•°ä¸­æ·»åŠ æ–°å­—æ®µçš„ç¤ºä¾‹å€¼
- åœ¨å­—æ®µæ ‡ç­¾æ˜ å°„å‡½æ•°ä¸­æ·»åŠ æ–°å­—æ®µçš„æ˜ å°„
- æ”¯æŒ `birth_date` å’Œ `current_location` å­—æ®µ

---

## ğŸ“‹ å®Œæ•´çš„å­—æ®µåˆ—è¡¨

åŸºæœ¬ä¿¡æ¯ç»„ä»¶ç°åœ¨åŒ…å«ä»¥ä¸‹12ä¸ªå­—æ®µï¼ˆç¬¦åˆéœ€æ±‚æ–‡æ¡£ï¼‰ï¼š

| å­—æ®µID | ä¸­æ–‡åç§° | æ•°æ®æº | è¯´æ˜ |
|--------|----------|--------|------|
| `name` | å§“å | `basic_info.name` | ä¸ªäººçœŸå®å§“å |
| `gender` | æ€§åˆ« | `basic_info.gender` | æ€§åˆ«ï¼ˆç”·/å¥³ï¼‰ |
| `birth_date` | å‡ºç”Ÿå¹´æœˆ | `basic_info.birth_date` | å‡ºç”Ÿå¹´æœˆï¼ˆYYYY-MMï¼‰ |
| `email` | é‚®ç®± | `basic_info.email` | ç”µå­é‚®ç®±åœ°å€ |
| `phone` | ç”µè¯ | `basic_info.phone` | è”ç³»ç”µè¯ |
| `wechat` | å¾®ä¿¡ | `basic_info.wechat` | å¾®ä¿¡å· |
| `hometown` | ç±è´¯ | `basic_info.hometown` | ç±è´¯ |
| `family_location` | å®¶åº­æ‰€åœ¨ | `basic_info.family_location` | å®¶åº­æ‰€åœ¨çš„åŸå¸‚ï¼ˆçœã€å¸‚ã€å¿ç­‰ï¼‰ |
| `current_location` | ç°å·¥ä½œåœ° | `basic_info.current_location` | å½“å‰å·¥ä½œçš„åŸå¸‚æˆ–åœ°åŒº |
| `marital_status` | å©šè‚²çŠ¶å†µ | `basic_info.marital_status` | å©šè‚²çŠ¶å†µ |
| `onboard_date` | å…¥èŒæ—¶é—´ | `basic_info.onboard_date` | å¯ä»¥å¼€å§‹å·¥ä½œçš„æ—¶é—´ |
| `other_info` | å…¶ä»–ä¿¡æ¯ | `basic_info.other_info` | æœ‰åˆ©äºæ±‚èŒçš„ä¿¡æ¯ï¼ˆæŠ€èƒ½ã€ç‰¹é•¿ã€èµ„è´¨ã€è¯ä¹¦ç­‰ï¼‰ |

---

## ğŸ”„ å…¼å®¹æ€§è¯´æ˜

ä¸ºäº†ä¿æŒå‘åå…¼å®¹ï¼Œä»¥ä¸‹å­—æ®µåä»ç„¶æ”¯æŒï¼ˆä½†ä¼šæ˜ å°„åˆ°æ–°å­—æ®µï¼‰ï¼š

- `birthday` â†’ `birth_date`
- `current_work_location` â†’ `current_location`

---

## âœ… éªŒè¯

- âœ… å­—æ®µåä¸ `fieldMetadata.ts` ä¸­çš„å®šä¹‰ä¸€è‡´
- âœ… æ‰€æœ‰éœ€æ±‚æ–‡æ¡£ä¸­çš„å­—æ®µéƒ½å·²åŒ…å«
- âœ… å­—æ®µæ˜ å°„æ­£ç¡®
- âœ… å‘åå…¼å®¹æ€§ä¿æŒ
- âœ… ä»£ç é€šè¿‡ lint æ£€æŸ¥

---

**ä¿®å¤å®Œæˆæ—¥æœŸ**: 2025-12-05

